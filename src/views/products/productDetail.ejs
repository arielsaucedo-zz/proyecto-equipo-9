<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<body>

    <%- include('../partials/header') %>

    <!-- product detail -->
    <div class="container">
        <div class="card my-4 p-3 shadow-lg rounded border-0">
            <div class="card-body">
                <div class="card-title text-center mb-4">
                    <h2 class="register-h2">Detalle del producto: <%= productDetail.name %></h2>
                    <hr>
                </div>

                <div class="product-detail">
                    <div class="row">
                        <div class="col-12 col-lg-6">
                            <img class="product-detail-img" src="/images/products/<%= productDetail.image %>" alt="">
                        </div>

                        <div class="card bg-light mb-3 col-12 col-lg-6" style="max-width: 40rem;">
                            <div class="card-body-detail">
                                <p class="d-flex product-detail-price">
                                    <% if(productDetail.discount > 0){ %>
                                        
                                    <p> Precio Original: <strike> <strong> $ <%= helpers.trunc(productDetail.price) %> </strike> </strong></p>
                                    
                                    <p>Promoci√≥n / Descuento: <strong><%= productDetail.discount %> % OFF </strong></p>
                                    <% } %>
                                </p> 
                                
                                <p>Precio Final: <strong>$ <%= helpers.trunc((productDetail.price * (1 - (productDetail.discount /100))).toFixed(2)) %> </strong></p>
                                
                                <form action="/users/<%= productDetail.id %>/addToCart" method="POST" style="display: inline-flex">
                                    <div class="ml-1">
                                        <div class="d-flex justify-content-center align-items-center">
                                            <label class="lbl-quantity mr-2" for="product_quantity">Cantidad</label>
                                            <input class="form-control mb-2 input-qty" type="number" name="product_quantity" id="product_quantity" value="1" min="1" max="9999">
                                        </div>
                                        <button type="submit" class="btn bg-cart m-2"><i class="fas fa-cart-arrow-down mr-2"></i> Agregar al carrito</button>
                                    </div>
                                </form>
                                <hr>
                                <% if ( locals.role_id == 2 ) { %>
                                <form action="/products/<%= productDetail.id %>/edit" method="get" style="display: inline-flex">
                                    <button type="submit" class="btn btn-primary"><i class="fas fa-edit mr-2"></i> Editar</button>
                                </form>

                                <form action="/products/delete/<%= productDetail.id %>?_method=DELETE" method="POST"
                                    style="display: inline-flex">
                                    <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt mr-2"></i> Eliminar</button>
                                </form>
                                <% } %>
                            </div>
                        </div>
                        <br>
                        <div class="container">
                            <div class="card">
                                <div class="card-body-detail">
                                    <p class="lead"><%= productDetail.description %></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <%- include('../partials/footer') %>

    <script src="/js/productsEditValidator.js"></script>
</body>

</html>