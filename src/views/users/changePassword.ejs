<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<body>

    <%- include('../partials/header') %>

    <main>
        <div class="container">
            <div class="row m-4 justify-content-center">
                <div class="card w-75 m-4 p-3 shadow-lg rounded border-0">
                    <div class="card-body">
                        <div class="card-title text-center mb-4">
                            <h2 class="register-h2">Cambiar Contraseña</h2>
                            <hr>
                        </div>

                        <form id="changePasswordForm" class="needs-validation" action="/users/userDetail/<%= userLoggedIn.id %>?_method=PUT" method="POST">
                            <div class="">
                                <label>Contraseña actual</label>
                                <div class="form-group pass_show"> 
                                    <input 
                                        type="password"
                                        value="" 
                                        class="form-control" 
                                        placeholder="Contraseña actual"
                                        name="password_old"
                                        id="password_old"
                                    > 
                                </div>
                                <div class="mb-3">
                                    <span id="password_old_msg" class="span_errors"></span>
                                    <% errors.forEach(error => { %>
                                        <% if(error.param == "password_old") { %>
                                            <span class="span_errors">* <%= error.msg %></span>
                                            <br>
                                            <% } else { "" } %>
                                    <% }) %>
                                </div>
                                        
                                <label>Nueva contraseña</label>
                                <div class="form-group pass_show"> 
                                    <input 
                                        type="password" 
                                        value="" 
                                        class="form-control" 
                                        placeholder="Nueva contraseña"
                                        name="password_new"
                                        id="password_new"> 
                                </div> 

                                <div class="mb-3">
                                    <span id="password_new_msg" class="span_errors"></span>
                                    <% errors.forEach(error => { %>
                                        <% if(error.param == "password_new") { %>
                                            <span class="span_errors">* <%= error.msg %></span>
                                            <br>
                                            <% } else { "" } %>
                                    <% }) %>
                                </div>

                                <label>Confirmacion nueva contraseña</label>
                                <div class="form-group pass_show"> 
                                    <input 
                                        type="password" 
                                        value="" 
                                        class="form-control" 
                                        placeholder="Confirmacion nueva contraseña" 
                                        name="password_confirmation"
                                        id="password_confirmation">
                                </div> 

                                <div class="mb-3">
                                    <span id="password_confirmation_msg" class="span_errors"></span>
                                    <% errors.forEach(error => { %>
                                        <% if(error.param == "password_confirmation") { %>
                                            <span class="span_errors">* <%= error.msg %></span>
                                            <br>
                                            <% } else { "" } %>
                                    <% }) %>
                                </div>

                                <div class="mt-5">
                                    <button type="submit" class="btn btn-primary" target="" id="send">Aceptar</button>
                                    <button type="reset" class="btn btn-warning" id="reset">Limpiar</button>
                                </div>
                            </div>
                        </form>
                    </div>  
                </div>                        
            </div>
        </div>
    </main>

    <%- include('../partials/footer') %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/validator/13.5.2/validator.min.js"
        integrity="sha512-vZEoK8xRncku4g5GANHh5zobUjeCMbZkSEahrADeAcRlk/1Ignf8sAKojkV4RZLkPw145+ILJFisI2pnjsPtGQ=="
        crossorigin="anonymous"></script>
    <script src="/js/changePassword.js"></script>

</body>

</html>